<div class="dashboard-container">
  <app-breadcrumb [items]="breadcrumbItems" separator=">" [showHome]="true"></app-breadcrumb>

  <div class="dashboard-header">
    <h1>Dashboard</h1>
    <div class="header-actions">
      <app-dropdown label="Actions" icon="‚öôÔ∏è" variant="outline" position="right" (itemClick)="onDropdownAction($event)">
        <app-dropdown-item id="edit" icon="‚úèÔ∏è" label="Edit"></app-dropdown-item>
        <app-dropdown-item id="duplicate" icon="üìã" label="Duplicate"></app-dropdown-item>
        <app-dropdown-item [divider]="true"></app-dropdown-item>
        <app-dropdown-item id="archive" icon="üì¶" label="Archive"></app-dropdown-item>
        <app-dropdown-item id="delete" icon="üóëÔ∏è" label="Delete" [danger]="true"></app-dropdown-item>
      </app-dropdown>
      <app-theme-toggle></app-theme-toggle>
      <app-button variant="outline" (click)="openModalViaService()">Open Modal</app-button>
      <app-button variant="secondary" (click)="logout()">Logout</app-button>
    </div>
  </div>

  <div class="dashboard-content">
    <div class="stats-grid">
      <app-card title="Total Users" [hoverable]="true">
        <div class="stat-value">1,234</div>
        <div class="stat-label">Active Users</div>
      </app-card>

      <app-card title="Revenue" [hoverable]="true">
        <div class="stat-value">$45,231</div>
        <div class="stat-label">This Month</div>
      </app-card>

      <app-card title="Orders" [hoverable]="true">
        <div class="stat-value">892</div>
        <div class="stat-label">Pending Orders</div>
      </app-card>

      <app-card title="Performance" [hoverable]="true">
        <div class="stat-value">98.5%</div>
        <div class="stat-label">Uptime</div>
      </app-card>
    </div>

    <div class="welcome-section">
      <app-card title="Welcome to Enterprise App">
        <p>This is an enterprise-ready Angular application with best practices.</p>
        <ul>
          <li>Modular architecture with feature modules</li>
          <li>State management with NgRx</li>
          <li>Authentication and authorization</li>
          <li>Comprehensive testing setup</li>
          <li>CI/CD pipeline ready</li>
        </ul>
      </app-card>
    </div>

    <div class="tabs-section">
      <app-card title="Tabs Component Demo">
        <app-tabs [tabs]="profileTabs" variant="default" [activeTabId]="activeProfileTab()">
          <app-tab-panel [tabId]="'overview'" [active]="activeProfileTab() === 'overview'">
            <h3>Overview</h3>
            <p>Welcome to your dashboard overview. Here you can see key metrics and recent activity.</p>
            <div class="overview-stats">
              <div class="stat-item">
                <span class="stat-number">156</span>
                <span class="stat-desc">Total Projects</span>
              </div>
              <div class="stat-item">
                <span class="stat-number">89%</span>
                <span class="stat-desc">Success Rate</span>
              </div>
              <div class="stat-item">
                <span class="stat-number">24</span>
                <span class="stat-desc">Team Members</span>
              </div>
            </div>
          </app-tab-panel>

          <app-tab-panel [tabId]="'activity'" [active]="activeProfileTab() === 'activity'">
            <h3>Recent Activity</h3>
            <div class="activity-list">
              <div class="activity-item">
                <span class="activity-icon">‚úÖ</span>
                <div class="activity-content">
                  <strong>Task completed:</strong> Update dashboard components
                  <span class="activity-time">2 hours ago</span>
                </div>
              </div>
              <div class="activity-item">
                <span class="activity-icon">üìù</span>
                <div class="activity-content">
                  <strong>New comment:</strong> Feedback on the latest release
                  <span class="activity-time">5 hours ago</span>
                </div>
              </div>
              <div class="activity-item">
                <span class="activity-icon">üöÄ</span>
                <div class="activity-content">
                  <strong>Deployment:</strong> Production release v2.0.1
                  <span class="activity-time">1 day ago</span>
                </div>
              </div>
            </div>
          </app-tab-panel>

          <app-tab-panel [tabId]="'settings'" [active]="activeProfileTab() === 'settings'">
            <h3>Settings</h3>
            <p>Configure your dashboard preferences and account settings.</p>
            <div class="settings-options">
              <app-checkbox label="Enable email notifications"></app-checkbox>
              <app-checkbox label="Show advanced features"></app-checkbox>
              <app-checkbox label="Auto-save changes"></app-checkbox>
            </div>
          </app-tab-panel>
        </app-tabs>
      </app-card>
    </div>

    <div class="accordion-section">
      <app-card title="Accordion Component Demo - FAQ">
        <app-accordion [allowMultiple]="false">
          <app-accordion-item id="faq1" title="What is this application?" icon="‚ùì">
            <p>
              This is an enterprise-ready Angular application built with modern best practices
              and design patterns. It includes state management with NgRx, authentication,
              comprehensive utilities, and a complete component library.
            </p>
          </app-accordion-item>

          <app-accordion-item id="faq2" title="How do I get started?" icon="üöÄ">
            <p>Getting started is easy:</p>
            <ol>
              <li>Clone the repository</li>
              <li>Run <code>npm install</code> to install dependencies</li>
              <li>Run <code>npm start</code> to start the development server</li>
              <li>Navigate to <code>http://localhost:4200/</code></li>
            </ol>
          </app-accordion-item>

          <app-accordion-item id="faq3" title="What features are included?" icon="‚≠ê">
            <p>The application includes:</p>
            <ul>
              <li><strong>State Management:</strong> NgRx for predictable state updates</li>
              <li><strong>Authentication:</strong> JWT-based auth with refresh tokens</li>
              <li><strong>UI Components:</strong> 15+ reusable components with dark mode</li>
              <li><strong>Form Controls:</strong> Input, select, checkbox, radio with validation</li>
              <li><strong>Utilities:</strong> 100+ helper functions for common tasks</li>
              <li><strong>Testing:</strong> Comprehensive test setup with Jest</li>
            </ul>
          </app-accordion-item>

          <app-accordion-item id="faq4" title="Is it production-ready?" icon="‚úÖ">
            <p>
              Yes! This application follows enterprise best practices including:
            </p>
            <ul>
              <li>TypeScript strict mode for type safety</li>
              <li>Modular architecture with lazy-loaded features</li>
              <li>Docker configuration for containerization</li>
              <li>CI/CD pipeline with GitHub Actions</li>
              <li>Comprehensive error handling and logging</li>
              <li>Performance optimizations and code splitting</li>
            </ul>
          </app-accordion-item>

          <app-accordion-item id="faq5" title="How can I customize it?" icon="üé®">
            <p>
              Customization is straightforward with CSS variables for theming,
              modular components that can be extended, and clear separation of concerns.
              Check the documentation for detailed customization guides.
            </p>
          </app-accordion-item>
        </app-accordion>
      </app-card>
    </div>

    <div class="dropdown-section">
      <app-card title="Dropdown Menu Component Demo">
        <div class="dropdown-demo">
          <div class="dropdown-example">
            <h4>Action Menu</h4>
            <app-dropdown label="Actions" icon="‚öôÔ∏è" variant="outline" (itemClick)="onDropdownAction($event)">
              <app-dropdown-item id="edit" icon="‚úèÔ∏è" label="Edit"></app-dropdown-item>
              <app-dropdown-item id="duplicate" icon="üìã" label="Duplicate"></app-dropdown-item>
              <app-dropdown-item [divider]="true"></app-dropdown-item>
              <app-dropdown-item id="archive" icon="üì¶" label="Archive"></app-dropdown-item>
              <app-dropdown-item id="delete" icon="üóëÔ∏è" label="Delete" [danger]="true"></app-dropdown-item>
            </app-dropdown>
          </div>

          <div class="dropdown-example">
            <h4>Variants</h4>
            <div class="dropdown-variants">
              <app-dropdown label="Primary" variant="primary" size="sm">
                <app-dropdown-item id="option1" icon="‚≠ê" label="Option 1"></app-dropdown-item>
                <app-dropdown-item id="option2" icon="üéØ" label="Option 2"></app-dropdown-item>
              </app-dropdown>

              <app-dropdown label="Secondary" variant="secondary" size="md">
                <app-dropdown-item id="save" icon="üíæ" label="Save"></app-dropdown-item>
                <app-dropdown-item id="export" icon="üì§" label="Export"></app-dropdown-item>
              </app-dropdown>

              <app-dropdown label="Ghost" variant="ghost" size="lg">
                <app-dropdown-item id="view" icon="üëÅÔ∏è" label="View"></app-dropdown-item>
                <app-dropdown-item id="share" icon="üîó" label="Share"></app-dropdown-item>
              </app-dropdown>
            </div>
          </div>

          <div class="dropdown-example">
            <h4>User Menu Example</h4>
            <app-dropdown icon="üë§" label="John Doe" variant="outline" position="right">
              <app-dropdown-item id="profile" icon="üë§" label="My Profile"></app-dropdown-item>
              <app-dropdown-item id="settings" icon="‚öôÔ∏è" label="Settings"></app-dropdown-item>
              <app-dropdown-item id="billing" icon="üí≥" label="Billing"></app-dropdown-item>
              <app-dropdown-item [divider]="true"></app-dropdown-item>
              <app-dropdown-item id="help" icon="‚ùì" label="Help & Support"></app-dropdown-item>
              <app-dropdown-item id="logout" icon="üö™" label="Logout" [danger]="true"></app-dropdown-item>
            </app-dropdown>
          </div>
        </div>
      </app-card>
    </div>

    <div class="users-section">
      <app-card title="Users Management">
        <app-table [columns]="columns" [data]="users" [config]="{
            pageSize: 5,
            pageSizeOptions: [5, 10, 20],
            showPagination: true,
            showSearch: true,
            striped: true,
            hoverable: true,
          }" (rowClick)="onRowClick($event)"></app-table>
      </app-card>
    </div>

    <div class="form-section">
      <app-card title="Form Components Demo">
        <form class="demo-form">
          <div class="form-row">
            <app-input label="Full Name" placeholder="Enter your name" [required]="true" icon="üë§"
              hint="Enter your first and last name" [(ngModel)]="formName" name="name"></app-input>
          </div>

          <div class="form-row">
            <app-input label="Email Address" type="email" placeholder="you@example.com" [required]="true" icon="üìß"
              [(ngModel)]="formEmail" name="email"></app-input>
          </div>

          <div class="form-row">
            <app-input label="Password" type="password" placeholder="Enter password" [required]="true" icon="üîí"
              hint="Must be at least 8 characters" [(ngModel)]="formPassword" name="password"></app-input>
          </div>

          <div class="form-row">
            <app-select label="Country" placeholder="Select your country" [options]="countryOptions" [searchable]="true"
              [required]="true" hint="Choose from the list" [(ngModel)]="formCountry" name="country"></app-select>
          </div>

          <div class="form-row">
            <app-select label="Skills" placeholder="Select your skills" [options]="skillOptions" [searchable]="true"
              [multiple]="true" hint="You can select multiple skills" [(ngModel)]="formSkills"
              name="skills"></app-select>
          </div>

          <div class="form-row">
            <app-checkbox label="Subscribe to newsletter" hint="Receive updates about new features"
              [(ngModel)]="formNewsletter" name="newsletter"></app-checkbox>
          </div>

          <div class="form-row">
            <app-checkbox label="Enable push notifications" [(ngModel)]="formNotifications"
              name="notifications"></app-checkbox>
          </div>

          <div class="form-row">
            <app-radio label="Choose a Plan" [options]="planOptions" [required]="true" [(ngModel)]="formPlan"
              name="plan"></app-radio>
          </div>

          <div class="form-actions">
            <app-button variant="outline" (click)="resetForm()" type="button">Reset</app-button>
            <app-button variant="primary" (click)="submitForm()" type="button">Submit</app-button>
          </div>
        </form>
      </app-card>
    </div>
  </div>
</div>

<!-- User Details Modal -->
<app-modal [title]="'User Details'" [size]="'md'" [isOpen]="showModal" (closeEvent)="closeModal()"
  *ngIf="showModal && selectedUser">
  <div class="modal-content">
    <div class="user-detail">
      <label>ID:</label>
      <span>{{ selectedUser.id }}</span>
    </div>
    <div class="user-detail">
      <label>Name:</label>
      <span>{{ selectedUser.name }}</span>
    </div>
    <div class="user-detail">
      <label>Email:</label>
      <span>{{ selectedUser.email }}</span>
    </div>
    <div class="user-detail">
      <label>Role:</label>
      <span>{{ selectedUser.role }}</span>
    </div>
    <div class="user-detail">
      <label>Status:</label>
      <span [class]="selectedUser.status ? 'status-active' : 'status-inactive'">
        {{ selectedUser.status ? 'Active' : 'Inactive' }}
      </span>
    </div>
    <div class="user-detail">
      <label>Created:</label>
      <span>{{ selectedUser.createdAt }}</span>
    </div>
  </div>

  <div footer>
    <app-button variant="outline" (click)="closeModal()">Cancel</app-button>
    <app-button variant="primary" (click)="deleteUser()">Delete User</app-button>
  </div>
</app-modal>